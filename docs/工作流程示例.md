# 技术支持机器人 - 工作流程示例

## 完整对话流程示例

### 示例 1：缺陷报告流程

**用户**: 接口测试失败了，返回 500 错误

**机器人**:
收到您的问题！让我先收集一些信息以便更好地帮助您。

**机器人**:
请用一句话描述问题（20字以内，包含功能模块和现象）

**用户**: 【Apifox Web】接口测试时返回 500 内部服务器错误

**机器人**:
请问您的 Apifox 版本号是多少？

**用户**: 2.5.12

**机器人**:
问题出现在哪个端？[Web端/客户端/浏览器及版本]

**用户**: Web端，Chrome 浏览器 120 版本

**机器人**:
请详细描述复现步骤（按1-2-3-4编号，必须清晰且完整）

**用户**:
1. 登录 Apifox 账号，进入项目"测试项目"
2. 选择接口 POST /api/users
3. 点击"发送"按钮
4. 查看响应结果

**机器人**:
预期应该发生什么？

**用户**: 应该返回 200 状态码和用户数据

**机器人**:
实际出现了什么问题或现象？

**用户**: 返回 500 Internal Server Error，响应体为空

**机器人**:
这个问题是必现还是偶现？如果是偶现，大概概率是多少？

**用户**: 每次都出现，必现

**机器人**:
能否提供以下信息：
1. 截图或录屏（视频格式，不用gif）
2. Console 报错截图
3. Network 日志（HAR文件）
4. 项目ID/邮箱/团队ID等具体信息

**用户**: [上传截图] 项目ID: proj_123456

---

**机器人**:
感谢您的信息！我正在分析您的问题...

📊 **分析结果**：
- 问题类型：缺陷 (Bug)
- 置信度：92%
- 判断依据：产品功能与预期设计不符，出现了明确的错误（500 错误）

📝 **生成缺陷报告**：

```
缺陷标题: 【Apifox Web】接口测试时返回 500 内部服务器错误

出现环境: 版本号 2.5.12 、 [Web端/Chrome 120]

复现步骤:
1. 登录 Apifox 账号，进入项目"测试项目"
2. 选择接口 POST /api/users
3. 点击"发送"按钮
4. 查看响应结果

预期: 应该返回 200 状态码和用户数据

现状: 返回 500 Internal Server Error，响应体为空

是否必现：总是复现

补充信息:
- 项目ID: proj_123456
- 已上传截图
```

✅ **已创建飞书工单**
查看链接：https://feishu.cn/base/xxxxx
我们将尽快处理，感谢您的反馈！

---

### 示例 2：需求提交流程

**用户**: 希望能批量导出接口文档为 PDF

**机器人**:
收到您的需求建议！让我了解一些详细信息。

**机器人**:
请简要描述需求建议（20字以内）

**用户**: 批量导出多个接口文档为 PDF 文件

**机器人**:
用户在什么情况下、想做什么事情？请描述具体使用场景

**用户**: 我们团队每周需要给客户分享接口文档，现在只能一个接口一个接口地导出，很耗时

**机器人**:
用户目前遇到了什么障碍？为什么现有功能无法满足？

**用户**:
现有功能只能单个导出，我们有 50+ 个接口需要导出，每次都要重复操作很多次，大概要花 30 分钟

**机器人**:
用户希望达成的最终目标是什么？期望的解决方案是什么？

**用户**: 希望能选中多个接口，一键批量导出成一个 PDF 文档

**机器人**:
用户类型？[个人/企业/私有化用户]

**用户**: 企业用户

**机器人**:
付费/订阅状态？[免费版/付费版/私有化]

**用户**: 付费版（专业版）

**机器人**:
团队规模大概多少人？

**用户**: 20 人左右

**机器人**:
这个需求对用户工作流的影响程度？

**用户**: 每周节省约 30 分钟，团队 5 个接口工程师都有这个需求

---

**机器人**:
感谢您的反馈！我正在分析您的需求...

📊 **分析结果**：
- 问题类型：功能需求
- 置信度：88%
- 判断依据：产品缺少某个功能，现有功能无法满足用户工作流
- 价值评估：中等（付费用户，有明确的时间和效率收益）

📝 **生成需求报告**：

```
需求标题: 批量导出多个接口文档为 PDF 文件

## 一、需求与缺陷的判断
- 判断标准：产品缺少某个功能，或现有功能无法满足用户的工作流
- 分类：需求

## 二、产品需求登记

### 1. 用户使用情景
团队每周需要给客户分享接口文档，需要一次性导出多个接口的文档

### 2. 当前产品现状
现有功能只能单个导出，有 50+ 个接口需要导出，每次重复操作很耗时，约需 30 分钟

### 3. 用户期望
希望能选中多个接口，一键批量导出成一个 PDF 文档

### 4. 用户属性
- 用户类型：企业用户
- 付费/订阅状态：付费版（专业版）
- 团队规模：20 人
- 影响程度：每周节省约 30 分钟，团队 5 个接口工程师都有这个需求

## 三、附加信息
- 原始反馈链接/截图：[用户截图]
- 提交时间：2025-01-15 14:30:00
```

✅ **已创建飞书工单**
查看链接：https://feishu.cn/base/xxxxx
您的需求已反馈给产品团队进行评估，感谢您的建议！

---

### 示例 3：使用问题流程

**用户**: 怎么在 Apifox 中设置环境变量？

**机器人**:
收到您的问题！让我先了解一下具体情况。

**机器人**:
您是在哪个端使用？[Web端/客户端]

**用户**: 客户端

**机器人**:
您想通过环境变量实现什么功能？

**用户**: 我想在测试环境和生产环境之间切换

**机器人**:
让我查找相关文档...

📚 **在帮助文档中找到了相关内容**：

根据 Apifox 文档，设置环境变量的步骤如下：

1. 在左侧导航栏点击"环境管理"
2. 点击"新建环境"按钮
3. 输入环境名称（如"测试环境"、"生产环境"）
4. 在变量列表中添加变量，如 `base_url`
5. 不同环境中设置不同的值
6. 在接口中使用 `{{base_url}}` 引用变量

📖 **详细文档链接**：
- https://docs.apifox.com/env-management

---

这个问题已经解决，如果还有其他疑问，欢迎随时提问！

如果您觉得这个问题应该改进，也可以告诉我，我会作为需求反馈给产品团队。

---

## 机器人的工作原理

### 1. 信息收集阶段
- 根据问题类型，使用不同的字段收集信息
- 缺陷：8 个必填/选填字段
- 需求：9 个必填/选填字段
- 使用问题：先尝试解答，无法解答再转为需求

### 2. 分类判断阶段
- 基于三大标准：
  - **缺陷**：功能异常、错误、报错
  - **需求**：缺少功能、无法满足工作流
  - **使用问题**：未找到正确操作方式

### 3. 知识检索阶段
- 使用 RAG 技术在帮助文档中搜索
- 返回最相关的文档片段
- 提供文档链接

### 4. 模板生成阶段
- 按照公司规范填充模板
- 包含所有必需字段
- 添加机器人的辅助信息

### 5. 工单创建阶段
- 发送到飞书多维表格
- 通知负责人
- 提供工单链接

## 与人工流程的对比

| 环节 | 人工流程 | 机器人流程 | 效率提升 |
|------|---------|-----------|---------|
| 信息收集 | 反复确认，10-15分钟 | 自动收集，3-5分钟 | 3x |
| 分类判断 | 人工判断，可能出错 | LLM 自动判断，准确度高 | 更准确 |
| 知识检索 | 手动搜索文档 | RAG 自动检索 | 10x |
| 模板填写 | 手动复制粘贴 | 自动生成 | 5x |
| 工单创建 | 手动创建飞书记录 | API 自动创建 | 即时 |
| **总计** | **20-30 分钟** | **5-8 分钟** | **4x** |

## 质量保证

### 缺陷记录质量
- ✅ 标题规范（20字以内）
- ✅ 环境信息完整
- ✅ 复现步骤清晰（1-2-3-4）
- ✅ 预期/现状明确
- ✅ 是否必现标注
- ✅ 补充信息收集

### 需求记录质量
- ✅ 使用情景清晰
- ✅ 现状障碍明确
- ✅ 用户期望具体
- ✅ 用户属性完整
- ✅ 影响程度量化
- ✅ 避免代劳设计

### 人工审核环节
机器人最后仍需人工审核：
1. 确认分类是否准确
2. 补充遗漏信息
3. 判断优先级（P0/P1/P2/P3）
4. 分配负责人
5. 添加标签

## 持续优化

根据实际使用数据，可以优化：
- Prompt 模板（提高分类准确度）
- 信息收集字段（减少不必要的提问）
- 知识库内容（补充常见问题）
- 响应话术（更友好自然）

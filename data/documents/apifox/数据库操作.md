# 数据库操作

**来源**: https://docs.apifox.com/database

## 概述

Apifox 支持在接口测试中直接操作数据库，方便进行数据验证。

## 支持的数据库

- MySQL
- PostgreSQL
- SQL Server
- Oracle
- MongoDB
- Redis

## 连接数据库

### 步骤

1. 在项目中添加数据库连接
2. 选择数据库类型
3. 填写连接信息：
   - 主机地址
   - 端口
   - 数据库名
   - 用户名
   - 密码
4. 测试连接

## 使用数据库

### 在前置操作中查询

```sql
SELECT * FROM users WHERE id = {{user_id}}
```

### 在断言中验证

```sql
SELECT COUNT(*) FROM orders WHERE user_id = {{user_id}}
```

## 常见操作

### 插入测试数据

```sql
INSERT INTO users (name, email) VALUES ('测试', 'test@example.com')
```

### 清理测试数据

```sql
DELETE FROM users WHERE name = '测试'
```

## 注意事项

1. **权限**: 确保数据库账号有足够的权限
2. **安全**: 不要在生产环境直接操作
3. **备份**: 操作前先备份数据
4. **事务**: 涉及修改的操作建议使用事务

## 常见问题

### Q: 数据库连接失败？

A: 检查：
- 网络是否通
- 数据库地址和端口是否正确
- 用户名和密码是否正确
- 数据库是否允许远程连接

### Q: SQL 语句执行失败？

A: 检查：
- SQL 语法是否正确
- 表名和字段名是否正确
- 数据类型是否匹配
- 是否有权限执行该操作
